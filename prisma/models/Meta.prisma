model Meta {
  id       Int @id
  anime_id Int @unique

  franchise String?
  rating    String?

  episodes_aired Int? @map("episodes_aired")
  episodes_total Int? @map("episodes_total")

  moreinfo  String?
  broadcast String?

  nsfw Boolean @default(false)

  titles       Title[]       @relation("MetaToTitle")
  descriptions Description[] @relation("MetaToDescription")
  images       Image[]       @relation("MetaToImage")
  mappings     Mappings[]    @relation("MetaToMappings")
  episodes     Episode[]     @relation("MetaToEpisode")
  videos       Video[]       @relation("MetaToVideo")
  screenshots  Screenshot[]  @relation("MetaToScreenshot")
  artworks     Artwork[]     @relation("MetaToArtwork")
  chronology   Chronology[]  @relation("MetaToChronology")

  anime Anime @relation(fields: [anime_id], references: [id])
}

model Mappings {
  id String @id @default(cuid())

  source_id   String @map("source_id")
  source_name String @map("source_name")

  meta_id Int  @map("meta_id")
  parent  Meta @relation("MetaToMappings", fields: [meta_id], references: [id])

  @@unique([source_id, source_name])
}

model Episode {
  id Int @id

  number    Int
  title     String?
  overview  String?
  thumbnail EpisodeThumbnail? @relation("EpisodeToEpisodeThumbnail")
  runtime   Int?
  date      String?

  parent Meta[] @relation("MetaToEpisode")
}

model EpisodeThumbnail {
  id String @id @default(cuid())

  small  String?
  medium String?
  large  String?

  episode_id Int     @unique @map("episode_id")
  parent     Episode @relation("EpisodeToEpisodeThumbnail", fields: [episode_id], references: [id])
}

model Title {
  id String @id @default(cuid())

  title    String
  source   String
  language String

  parent Meta[] @relation("MetaToTitle")

  @@unique([title, source, language])
}

model Description {
  id String @id @default(cuid())

  description String
  source      String
  language    String

  parent Meta[] @relation("MetaToDescription")

  @@unique([description, source, language])
}

model Image {
  id String @id @default(cuid())

  url    String
  small  String?
  medium String?
  large  String?

  type   String
  source String

  parent Meta[] @relation("MetaToImage")

  @@unique([url, type, source])
}

model Video {
  id String @id @default(cuid())

  url       String
  title     String?
  thumbnail String?
  artist    String?
  type      String?
  source    String

  parent Meta[] @relation("MetaToVideo")

  @@unique([url, source])
}

model Screenshot {
  id       String  @id
  original String?
  x166     String?
  x332     String?

  parent Meta[] @relation("MetaToScreenshot")
}

model Artwork {
  id        String  @id @default(cuid())
  url       String
  height    Int?
  width     Int?
  image     String?
  language  String?
  thumbnail String?
  type      String
  source    String

  parent Meta[] @relation("MetaToArtwork")

  @@unique([url, type, source])
}

model Chronology {
  id         String @id @default(cuid())
  parent_id  Int    @map("parent_id")
  related_id Int    @map("related_id")
  order      Int

  meta_id Int  @map("meta_id")
  parent  Meta @relation("MetaToChronology", fields: [meta_id], references: [id])

  @@unique([parent_id, related_id, order])
}
