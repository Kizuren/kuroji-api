model Anilist {
  id                Int      @id
  idMal             Int?
  siteUrl           String?
  // Embedded objects stored as JSON
  title             AnilistTitle? @relation(fields: [titleId], references: [id]) // corresponds to Release.Title
  coverImage        AnilistCover? @relation(fields: [coverId], references: [id]) // corresponds to Release.CoverImage
  bannerImage       String?
  status            String?
  type              String?
  format            String?
  updatedAt         Int?
  description       String?
  startDate         StartDate? @relation(fields: [startDateId], references: [id]) // corresponds to Date (with start_year, start_month, start_day)
  endDate           EndDate? @relation(fields: [endDateId], references: [id]) // corresponds to Date (with end_year, end_month, end_day)
  season            String?
  seasonYear        Int?
  episodes          Int?
  duration          Int?
  countryOfOrigin   String?
  isLicensed        Boolean?
  source            String?
  hashtag           String?
  trailer           Json? // corresponds to Trailer
  isLocked          Boolean?
  isAdult           Boolean?
  averageScore      Int?
  meanScore         Int?
  popularity        Int?
  trending          Int?
  favourites        Int?
  genres            String[] // Element collection of strings
  synonyms          String[]
  // Complex embedded collections stored as JSON:
  recommendations   Json? // RecommendationEdgeWrapper<BasicId>
  characters        Json? // CharacterEdgeWrapper
  studios           Json? // StudioEdgeWrapper
  airingSchedule    Json? // AiringEdgeWrapper
  nextAiringEpisode Json? // AiringEpisode
  stats             Json? // Stats (including scoreDistribution and statusDistribution)

  // Normalized collections (stored in separate tables)
  tags              AnilistTag[] @relation("AnilistTags")
  externalLinks     Json?
  streamingEpisodes Json?

  titleId           Int?
  coverId           Int?
  startDateId		Int?
  endDateId			Int?
}

model AnilistTitle {
  id               Int      @id @default(autoincrement())
  romaji    String?
  english   String?
  native    String?
  anilist   Anilist[]
}

model StartDate {
  id               Int      @id @default(autoincrement())
  day       Int?
  month     Int?
  year      Int?
  anilist	Anilist[]
}

model EndDate {
  id               Int      @id @default(autoincrement())
  day       Int?
  month     Int?
  year      Int?
  anilist	Anilist[]
}

model AnilistCover {
  id               Int      @id @default(autoincrement())
  color     String?
  large     String?
  medium    String?
  extraLarge String?
  anilist	Anilist[]
}

model AnilistIndex {
  id        String   @id
  updatedAt DateTime @default(now()) @updatedAt
  createdAt DateTime @default(now())
}

model AnilistTag {
  id               Int      @id @default(autoincrement())
  releaseId        Int
  tagId            Int?
  name             String?
  description      String?
  category         String?
  rank             Int?
  isGeneralSpoiler Boolean?
  isMediaSpoiler   Boolean?
  isAdult          Boolean?
  userId           Int?

  anilist          Anilist  @relation("AnilistTags", fields: [releaseId], references: [id])
}

model AnilistExternalLink {
  id         Int      @id @default(autoincrement())
  releaseId  Int
  exLinkId   Int?
  url        String?
  site       String?
  siteId     Int?
  type       String?
  language   String?
  color      String?
  icon       String?
  notes      String?
  isDisabled Boolean?
}

model AnilistStreamingEpisode {
  id        Int     @id @default(autoincrement())
  releaseId Int
  title     String?
  thumbnail String?
  url       String?
  site      String?
}

model BasicIdAni {
  id        Int      @id @default(autoincrement())
  idMal     Int?
}

model BasicRelease {
  id                Int      @id
  idMal             Int?
  siteUrl           String?
  title             Json?
  synonyms          String[]
  bannerImage       String?
  coverImage        Json?
  type              String?
  format            String?
  status            String?
  description       String?
  startDate         Json?
  season            String?
  seasonYear        Int?
  episodes          Int?
  episodesAired     Int?
  duration          Int?
  countryOfOrigin   String?
  popularity        Int?
  favourites        Int?
  averageScore      Int?
  meanScore         Int?
  isLocked          Boolean?
  isAdult           Boolean?
  genres            String[]
  nextAiringEpisode Json?
}