model UpdateQueue {
  id        String   @id @default(uuid())
  animeId   Int      @unique
  malId     Int?
  priority  String
  reason    String
  addedAt   DateTime @default(now())
  retries   Int      @default(0)
  lastError String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([priority, addedAt])
  @@index([animeId])
}

model UpdateHistory {
  id          String   @id @default(uuid())
  animeId     Int
  malId       Int?
  success     Boolean
  duration    Int?
  errorCount  Int      @default(0)
  errors      String[]
  triggeredBy String
  createdAt   DateTime @default(now())

  @@index([animeId, createdAt])
  @@index([success, createdAt])
}
